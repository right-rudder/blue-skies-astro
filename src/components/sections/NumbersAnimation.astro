---
const counters = [
  { target: 10000, suffix: "+", label: "Hours of combined experience" },
  { target: 95, suffix: "%", label: "Checkride pass rate" },
  {
    target: 100,
    suffix: "+",
    label: "Students graduated from Blue Skies Above",
  },
];
---

<section class="w-full">
  <div class="flex w-full items-center gap-5 md:items-start">
    {
      counters.map((counter) => (
        <div class="text-picton-blue-600 dark:text-picton-blue-400 flex flex-col items-center rounded-lg transition-all duration-300 hover:scale-105 md:items-start lg:w-1/3">
          <div
            class="counter text-4xl font-bold"
            data-target={counter.target}
            data-suffix={counter.suffix}
          >
            0{counter.suffix}
          </div>
          <p class="pb-5 text-center text-neutral-600 md:text-left dark:text-neutral-400">
            {counter.label}
          </p>
        </div>
      ))
    }
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const counters = document.querySelectorAll(".counter");
    counters.forEach((el) => {
      const element = el as HTMLElement; // âœ… fix: cast to HTMLElement

      const target = parseInt(element.dataset.target || "0");
      const suffix = element.dataset.suffix || "";
      let count = 0;
      const duration = 2000;
      const stepTime = 20;
      const steps = duration / stepTime;
      const increment = target / steps;

      const updateCount = () => {
        count += increment;
        if (count >= target) {
          count = target;
          clearInterval(timer);
        }
        element.textContent = `${Math.round(count).toLocaleString()}${suffix}`;
      };

      const timer = setInterval(updateCount, stepTime);
    });
  });
</script>
